(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
window.pogostick=require("./index");

},{"./index":2}],2:[function(require,module,exports){
var pogo=require("pogostick-proto"),requestFactory=function(t,e){try{var o=new XMLHttpRequest,s=t.protocol||"http",r=t.host||"localhost",n=t.port||("https"===s?443:80),u=t.path||"/",p=s+"://"+r+":"+n+u,a=t.headers||{},c=t.method||"POST";o.open(c,p,!0),a["X-Requested-With"]="XMLHttpRequest",Object.keys(a).forEach(function(t){o.setRequestHeader(t,a[t])}),o.onload=function(){o.status<300&&o.status>=200?e(null,o.responseText.split("\n")):e(new Error("Server responded with a "+o.status+" with message: "+o.responseText))},o.onerror=function(t){e(t)},t.body.str?o.send(t.body.str):o.send(t.body)}catch(d){e(d)}};module.exports=function(t,e){return pogo.client(t,requestFactory,e)};

},{"pogostick-proto":3}],3:[function(require,module,exports){
"use strict";var Exit=require("./lib/exit");module.exports={client:require("./lib/client"),server:require("./lib/server"),Exit:Exit,exit:Exit.create};

},{"./lib/client":4,"./lib/exit":6,"./lib/server":8}],4:[function(require,module,exports){
"use strict";function parseField(r,e,t,i,n,o,s){if("number"==typeof s){var a=mkRemoteProc(r,e,t,i,n,o);return mkFn(s,a)}if(Array.isArray(s)){for(var c=[],u=0;u<s.length;u++){var d=parseField(r,e,t,i,n,o+"."+u,s[u]);c.push(d)}return c}if("object"==typeof s){var l={};for(var p in s)if(s.hasOwnProperty(p)){var f=parseField(r,e,t,i,n,o+"."+p,s[p]);l[p]=f}return l}}function mkRemoteProc(r,e,t,i,n,o){return function(){if(n.isEnded)return debug("Procedure %s has been closed",o),r(function(r,e){return e(new Error("Connection is closed"))});void 0===this._implicitsCache&&(this._implicitsCache=JSON.stringify(this._implicits));var s=this._implicitsCache,a=Array.prototype.slice.call(arguments);return r(function(r,c){var u=serializer.call(o,a,s),d=extend({body:u},t);e(d,function(e,t){if(e)return debug("Error %o processing request %o",e,d),c(e),void(i.broadcastError&&i.error(e));switch(t[0]){case"exit":n.isEnded=!0;var o;if(void 0!==t[3])try{o=JSON.parse(t[3])}catch(e){}i.exit(t[1],t[2],o),i.end(t[1],t[2],o);break;case"err":var s;try{s=new Error(JSON.parse(t[3]))}catch(e){s=e}c(s),i.broadcastError&&i.error(s);break;case"res":r(JSON.parse(t[3]))}})})}}function $implicitly(r,e){var t={};for(var i in this._implicits)t[i]=this._implicits;return t[r]=e,new this.constructor(t)}function createRemoteClass(r,e,t,i){debug("Creating remote class for listing:\n%e",t);var n={isEnded:!1},o=i.on||{},s={end:o.end,error:o.error,broadcastError:!!o.error,exit:o.exit},a=function(r){this._implicits=r},c=Object.create(null);for(var u in t)c[u]=parseField(r,e,i,s,n,u,t[u]);return a.prototype=c,a.prototype.$implicitly=$implicitly,a.prototype.$end=function(){n.isEnded=!0,"function"==typeof s.end&&s.end.apply(this,arguments)},a.prototype.constructor=a,a}function initError(r){var e;try{e=JSON.parse(r[3])}catch(t){return new Error("Error requesting procedure listing")}return new Error(e)}var debug=require("./debug"),serializer=require("./serializer"),extend=require("extend"),mkFn=require("mk-fn");module.exports=function(r,e,t){var i=t?extend({},t):{};return function(t,n){var o=extend(extend({},i),t),s=extend({body:serializer.ls()},o);e(s,function(t,i){if(t)return debug("Error %o received for listing requests %o",t,s),n(t);if("err"===i[0]||"exit"===i[0])return debug("Received a `%s` for the response to the listing",i[0]),n(initError(i));var a;try{a=JSON.parse(i[3])}catch(c){return debug("JSON parsing error at listing"),n(new Error("JSON parser error: "+c.message))}var u=createRemoteClass(r,e,a,o);n(null,new u({}))})}};

},{"./debug":5,"./serializer":7,"extend":12,"mk-fn":13}],5:[function(require,module,exports){
"use strict";var debug=require("debug");debug.formatters.e=function(e){return JSON.stringify(e,null,"	")},module.exports=debug("pogostick-proto");

},{"debug":9}],6:[function(require,module,exports){
function Exit(t){this.message=t||""}Exit.create=function(t){return new Exit(t)},module.exports=Exit;

},{}],7:[function(require,module,exports){
"use strict";var cleanInitField=function(n){if("function"==typeof n)return n.length;if("object"==typeof n){if(Array.isArray(n))return n.map(cleanInitField);var r={};for(var t in n)n.hasOwnProperty(t)&&(r[t]=cleanInitField(n[t]));return r}},cleanProcObj=function(n){var r={};for(var t in n)n.hasOwnProperty(t)&&(r[t]=cleanInitField(n[t]));return r},randString=function(){var n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";return function(){for(var r=[],t=0;10>t;t++){var i=Math.floor(Math.random()*n.length),e=n.charAt(i);r.push(e)}return r.join("")}}();module.exports={ls:function(){return"ls\n"+Date.now()+"\n"+randString()},init:function(n){var r=cleanProcObj(n),t=JSON.stringify(r);return function(n,r){return"init\n"+n+"\n"+r+"\n"+t}},call:function(n,r,t){var i=randString(),e=Date.now();return{stamp:e,rand:i,str:"call\n"+e+"\n"+i+"\n"+n+"\n"+JSON.stringify(r)+"\n"+(t?JSON.stringify(t):"")}},res:function(n,r,t){return"res\n"+n+"\n"+r+"\n"+JSON.stringify(t)},err:function(n,r,t){return"err\n"+n+"\n"+r+"\n"+JSON.stringify(t)},exit:function(n,r,t){return 3===arguments.length?"err\n"+n+"\n"+r+"\n"+t:"err\n\n\n"+JSON.stringify(t)}};

},{}],8:[function(require,module,exports){
"use strict";function processCall(e,r){for(var n=e,t=r[3].split("."),i=0;i<t.length;i++)if(n=n[t[i]],void 0===n)return notExist(r);var s,a;try{s=r[5]?JSON.parse(r[5]):{},a=n.apply(s,JSON.parse(r[4]))}catch(u){return serializer.err(r[1],r[2],u.message)}return"function"==typeof a.then?a.then(function(e){return debugResponse(e),e instanceof Exit?serializer.exit(r[1],r[2],e.message):serializer.res(r[1],r[2],e)},function(e){return serializer.err(r[1],r[2],e)}):(debugResponse(a),a instanceof Exit?serializer.exit(r[1],r[2],a.message):serializer.res(r[1],r[2],a))}function notExist(e){var r=new Error("Procedure "+e[3]+" does not exist");return serializer.err(e[1],e[2],r)}function createReqHandler(e){var r=serializer.init(e);return function(n){switch(n[0]){case"ls":return r(n[1],n[2]);case"call":return processCall(e,n);default:var t={message:"Could not process request.",received:n.join("\n")};return serializer.err(n[1],n[2],t)}}}var extend=require("extend"),serializer=require("./serializer"),debug=require("./debug"),Exit=require("./exit"),noop=function(){},debugResponse=debug.enabled?debug.bind(debug,"serializing result %s"):noop;module.exports=function(e,r){var n=extend({},r);return function(r,t){var i=extend(extend({},n),t),s=createReqHandler(r);return e(s,i)}},module.exports.fn=createReqHandler;

},{"./debug":5,"./exit":6,"./serializer":7,"extend":12}],9:[function(require,module,exports){
function useColors(){return"WebkitAppearance"in document.documentElement.style||window.console&&(console.firebug||console.exception&&console.table)||navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31}function formatArgs(){var o=arguments,e=this.useColors;if(o[0]=(e?"%c":"")+this.namespace+(e?" %c":" ")+o[0]+(e?"%c ":" ")+"+"+exports.humanize(this.diff),!e)return o;var r="color: "+this.color;o=[o[0],r,"color: inherit"].concat(Array.prototype.slice.call(o,1));var t=0,s=0;return o[0].replace(/%[a-z%]/g,function(o){"%%"!==o&&(t++,"%c"===o&&(s=t))}),o.splice(s,0,r),o}function log(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function save(o){try{null==o?exports.storage.removeItem("debug"):exports.storage.debug=o}catch(e){}}function load(){var o;try{o=exports.storage.debug}catch(e){}return o}function localstorage(){try{return window.localStorage}catch(o){}}exports=module.exports=require("./debug"),exports.log=log,exports.formatArgs=formatArgs,exports.save=save,exports.load=load,exports.useColors=useColors,exports.storage="undefined"!=typeof chrome&&"undefined"!=typeof chrome.storage?chrome.storage.local:localstorage(),exports.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],exports.formatters.j=function(o){return JSON.stringify(o)},exports.enable(load());

},{"./debug":10}],10:[function(require,module,exports){
function selectColor(){return exports.colors[prevColor++%exports.colors.length]}function debug(e){function r(){}function o(){var e=o,r=+new Date,s=r-(prevTime||r);e.diff=s,e.prev=prevTime,e.curr=r,prevTime=r,null==e.useColors&&(e.useColors=exports.useColors()),null==e.color&&e.useColors&&(e.color=selectColor());var t=Array.prototype.slice.call(arguments);t[0]=exports.coerce(t[0]),"string"!=typeof t[0]&&(t=["%o"].concat(t));var n=0;t[0]=t[0].replace(/%([a-z%])/g,function(r,o){if("%%"===r)return r;n++;var s=exports.formatters[o];if("function"==typeof s){var p=t[n];r=s.call(e,p),t.splice(n,1),n--}return r}),"function"==typeof exports.formatArgs&&(t=exports.formatArgs.apply(e,t));var p=o.log||exports.log||console.log.bind(console);p.apply(e,t)}r.enabled=!1,o.enabled=!0;var s=exports.enabled(e)?o:r;return s.namespace=e,s}function enable(e){exports.save(e);for(var r=(e||"").split(/[\s,]+/),o=r.length,s=0;o>s;s++)r[s]&&(e=r[s].replace(/\*/g,".*?"),"-"===e[0]?exports.skips.push(new RegExp("^"+e.substr(1)+"$")):exports.names.push(new RegExp("^"+e+"$")))}function disable(){exports.enable("")}function enabled(e){var r,o;for(r=0,o=exports.skips.length;o>r;r++)if(exports.skips[r].test(e))return!1;for(r=0,o=exports.names.length;o>r;r++)if(exports.names[r].test(e))return!0;return!1}function coerce(e){return e instanceof Error?e.stack||e.message:e}exports=module.exports=debug,exports.coerce=coerce,exports.disable=disable,exports.enable=enable,exports.enabled=enabled,exports.humanize=require("ms"),exports.names=[],exports.skips=[],exports.formatters={};var prevColor=0,prevTime;

},{"ms":11}],11:[function(require,module,exports){
function parse(e){if(e=""+e,!(e.length>1e4)){var a=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(a){var r=parseFloat(a[1]),c=(a[2]||"ms").toLowerCase();switch(c){case"years":case"year":case"yrs":case"yr":case"y":return r*y;case"days":case"day":case"d":return r*d;case"hours":case"hour":case"hrs":case"hr":case"h":return r*h;case"minutes":case"minute":case"mins":case"min":case"m":return r*m;case"seconds":case"second":case"secs":case"sec":case"s":return r*s;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r}}}}function short(e){return e>=d?Math.round(e/d)+"d":e>=h?Math.round(e/h)+"h":e>=m?Math.round(e/m)+"m":e>=s?Math.round(e/s)+"s":e+"ms"}function long(e){return plural(e,d,"day")||plural(e,h,"hour")||plural(e,m,"minute")||plural(e,s,"second")||e+" ms"}function plural(s,e,a){return e>s?void 0:1.5*e>s?Math.floor(s/e)+" "+a:Math.ceil(s/e)+" "+a+"s"}var s=1e3,m=60*s,h=60*m,d=24*h,y=365.25*d;module.exports=function(s,e){return e=e||{},"string"==typeof s?parse(s):e["long"]?long(s):short(s)};

},{}],12:[function(require,module,exports){
"use strict";var hasOwn=Object.prototype.hasOwnProperty,toStr=Object.prototype.toString,isArray=function(t){return"function"==typeof Array.isArray?Array.isArray(t):"[object Array]"===toStr.call(t)},isPlainObject=function(t){if(!t||"[object Object]"!==toStr.call(t))return!1;var r=hasOwn.call(t,"constructor"),o=t.constructor&&t.constructor.prototype&&hasOwn.call(t.constructor.prototype,"isPrototypeOf");if(t.constructor&&!r&&!o)return!1;var n;for(n in t);return"undefined"==typeof n||hasOwn.call(t,n)};module.exports=function t(){var r,o,n,e,a,c,i=arguments[0],s=1,u=arguments.length,f=!1;for("boolean"==typeof i?(f=i,i=arguments[1]||{},s=2):("object"!=typeof i&&"function"!=typeof i||null==i)&&(i={});u>s;++s)if(r=arguments[s],null!=r)for(o in r)n=i[o],e=r[o],i!==e&&(f&&e&&(isPlainObject(e)||(a=isArray(e)))?(a?(a=!1,c=n&&isArray(n)?n:[]):c=n&&isPlainObject(n)?n:{},i[o]=t(f,c,e)):"undefined"!=typeof e&&(i[o]=e));return i};

},{}],13:[function(require,module,exports){
module.exports=function(n,t){switch(n){case 0:return function(){return t.apply(this,arguments)};case 1:return function(n){return t.apply(this,arguments)};case 2:return function(n,r){return t.apply(this,arguments)};case 3:return function(n,r,e){return t.apply(this,arguments)};case 4:return function(n,r,e,u){return t.apply(this,arguments)};case 5:return function(n,r,e,u,a){return t.apply(this,arguments)};case 6:return function(n,r,e,u,a,s){return t.apply(this,arguments)};case 7:return function(n,r,e,u,a,s,c){return t.apply(this,arguments)};case 8:return function(n,r,e,u,a,s,c,i){return t.apply(this,arguments)};case 9:return function(n,r,e,u,a,s,c,i,p){return t.apply(this,arguments)};case 10:return function(n,r,e,u,a,s,c,i,p,o){return t.apply(this,arguments)};case 11:return function(n,r,e,u,a,s,c,i,p,o,f){return t.apply(this,arguments)};case 12:return function(n,r,e,u,a,s,c,i,p,o,f,l){return t.apply(this,arguments)};case 13:return function(n,r,e,u,a,s,c,i,p,o,f,l,h){return t.apply(this,arguments)};case 14:return function(n,r,e,u,a,s,c,i,p,o,f,l,h,m){return t.apply(this,arguments)};case 15:return function(n,r,e,u,a,s,c,i,p,o,f,l,h,m,g){return t.apply(this,arguments)};case 16:return function(n,r,e,u,a,s,c,i,p,o,f,l,h,m,g,y){return t.apply(this,arguments)};case 17:return function(n,r,e,u,a,s,c,i,p,o,f,l,h,m,g,y,d){return t.apply(this,arguments)};case 18:return function(n,r,e,u,a,s,c,i,p,o,f,l,h,m,g,y,d,w){return t.apply(this,arguments)};case 19:return function(n,r,e,u,a,s,c,i,p,o,f,l,h,m,g,y,d,w,k){return t.apply(this,arguments)};case 20:return function(n,r,e,u,a,s,c,i,p,o,f,l,h,m,g,y,d,w,k,v){return t.apply(this,arguments)};case 21:return function(n,r,e,u,a,s,c,i,p,o,f,l,h,m,g,y,d,w,k,v,x){return t.apply(this,arguments)};case 22:return function(n,r,e,u,a,s,c,i,p,o,f,l,h,m,g,y,d,w,k,v,x,F){return t.apply(this,arguments)};case 23:return function(n,r,e,u,a,s,c,i,p,o,f,l,h,m,g,y,d,w,k,v,x,F,b){return t.apply(this,arguments)};case 24:return function(n,r,e,u,a,s,c,i,p,o,f,l,h,m,g,y,d,w,k,v,x,F,b,j){return t.apply(this,arguments)};case 25:return function(n,r,e,u,a,s,c,i,p,o,f,l,h,m,g,y,d,w,k,v,x,F,b,j,q){return t.apply(this,arguments)};case 26:return function(n,r,e,u,a,s,c,i,p,o,f,l,h,m,g,y,d,w,k,v,x,F,b,j,q,z){return t.apply(this,arguments)};default:throw"Function length is not valid, mk-fn cannot create function"}};

},{}]},{},[1])
//# sourceMappingURL=pogostick.js.map
