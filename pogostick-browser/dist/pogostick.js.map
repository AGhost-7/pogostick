{
  "version": 3,
  "sources": [
    "node_modules/browserify/node_modules/browser-pack/_prelude.js",
    "/home/jonathan/workspaces/pogostick/pogostick-browser/global.js",
    "/home/jonathan/workspaces/pogostick/pogostick-browser/index.js",
    "/home/jonathan/workspaces/pogostick/pogostick-proto/index.js",
    "/home/jonathan/workspaces/pogostick/pogostick-proto/lib/client.js",
    "/home/jonathan/workspaces/pogostick/pogostick-proto/lib/debug.js",
    "/home/jonathan/workspaces/pogostick/pogostick-proto/lib/exit.js",
    "/home/jonathan/workspaces/pogostick/pogostick-proto/lib/serializer.js",
    "/home/jonathan/workspaces/pogostick/pogostick-proto/lib/server.js",
    "/home/jonathan/workspaces/pogostick/pogostick-proto/node_modules/debug/browser.js",
    "/home/jonathan/workspaces/pogostick/pogostick-proto/node_modules/debug/debug.js",
    "/home/jonathan/workspaces/pogostick/pogostick-proto/node_modules/debug/node_modules/ms/index.js",
    "/home/jonathan/workspaces/pogostick/pogostick-proto/node_modules/extend/index.js",
    "/home/jonathan/workspaces/pogostick/pogostick-proto/node_modules/mk-fn/index.js"
  ],
  "names": [],
  "mappings": "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",
  "file": "generated.js",
  "sourceRoot": "",
  "sourcesContent": [
    "(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})",
    "\n/**\n * Load it as a global dependency, old-school. This is the root of the dist.\n */\n\nwindow.pogostick = require('./index');\n\n",
    "var pogo = require('pogostick-proto');\n\nvar requestFactory = function(options, cb) {\n\ttry {\n\t\tvar req = new XMLHttpRequest();\n\t\t\n\t\tvar protocol = options.protocol || 'http';\n\t\tvar host = options.host || 'localhost';\n\t\tvar port = options.port || (protocol === 'https' ? 443 : 80);\n\t\tvar path = options.path || '/';\n\t\tvar url = protocol + '://' + host + ':' + port + path;\n\t\tvar headers = options.headers || {};\n\t\tvar method = options.method || 'POST';\n\t\t\n\t\t// Needs to be opened to write headers to.\n\t\treq.open(method, url, true);\n\n\t\t// apply the headers to the request...\n\t\theaders[\"X-Requested-With\"] = \"XMLHttpRequest\";\n\t\tObject.keys(headers).forEach(function(key) {\n\t\t\treq.setRequestHeader(key, headers[key]);\n\t\t});\n\n\t\treq.onload = function() {\n\t\t\tif(req.status < 300 && req.status >= 200) {\n\t\t\t\tcb(null, req.responseText.split('\\n'));\n\t\t\t} else {\n\t\t\t\tcb(new Error('Server responded with a ' + \n\t\t\t\t\t\treq.status + ' with message: ' + req.responseText));\n\t\t\t}\n\t\t};\n\n\t\treq.onerror = function(err){\n\t\t\tcb(err);\n\t\t}; \n\t\t\n\t\tif(options.body.str) req.send(options.body.str);\n\t\telse req.send(options.body);\n\n\t} catch (err) {\n\t\tcb(err);\n\t}\n\n};\n\n/* There is not way for to create an ajax server... Might need to use an different api.\n * For now, this is only a client function. \n */\nmodule.exports = function(promiseFactory, opts) {\n\treturn pogo.client(promiseFactory, requestFactory, opts);\n};\n",
    "'use strict';\n\nvar Exit = require('./lib/exit');\n\nmodule.exports = {\n\tclient: require('./lib/client'),\n\tserver: require('./lib/server'),\n\tExit: Exit,\n\texit: Exit.create\n};\n",
    "\n'use strict';\n\nvar debug = require('./debug');\nvar serializer = require('./serializer');\nvar extend = require('extend');\nvar mkFn = require('mk-fn');\n\n/* This is what is used to travel through the listen sent by the server. \n * TODO: Optimize to a while loop or something. Not really important atm since\n * its only executed on the initial connection.\n */\nfunction parseField(\n\t\tpromiseFactory, \n\t\trequestFactory,\n\t\toptions,\n\t\tevents,\n\t \tstate,\n\t\tpath,\n\t\tval) {\n\t// if its a number, then according to the protocol we have a function.\n\tif(typeof val === 'number') {\n\t\tvar proc = mkRemoteProc(\n\t\t\tpromiseFactory, \n\t\t\trequestFactory, \n\t\t\toptions,\n\t\t\tevents,\n\t\t\tstate, \n\t\t\tpath);\n\t\treturn mkFn(val, proc);\n\t} else if(Array.isArray(val)) {\n\t\tvar arr = [];\n\t\tfor(var i = 0; i < val.length; i++) {\n\t\t\tvar parsed = parseField(\n\t\t\t\t\tpromiseFactory, \n\t\t\t\t\trequestFactory, \n\t\t\t\t\toptions,\n\t\t\t\t\tevents,\n\t\t\t\t\tstate,\n\t\t\t\t\tpath + '.' + i,\n\t\t\t\t\tval[i]);\n\t\t\tarr.push(parsed);\n\t\t}\n\t\treturn arr;\n\t} else if(typeof val === 'object') {\n\t\tvar res = {};\n\t\tfor(var key in val) {\n\t\t\tif(val.hasOwnProperty(key)) {\n\t\t\t\tvar parsedObj = parseField(\n\t\t\t\t\t\tpromiseFactory,\n\t\t\t\t\t\trequestFactory,\n\t\t\t\t\t\toptions,\n\t\t\t\t\t\tevents,\n\t\t\t\t\t\tstate,\n\t\t\t\t\t\tpath + '.' + key,\n\t\t\t\t\t\tval[key]);\n\n\t\t\t\tres[key] = parsedObj;\n\t\t\t}\n\t\t}\n\t\treturn res;\n\t}\n}\n\nfunction mkRemoteProc(\n\t\tpromiseFactory, \n\t\trequestFactory, \n\t\toptions, \n\t\tevents, \n\t\tstate, \n\t\tpath) {\n\treturn function() {\n\t\tif(state.isEnded) {\n\t\t\tdebug('Procedure %s has been closed', path);\n\t\t\treturn promiseFactory(function(resolve, reject) {\n\t\t\t\treturn reject(new Error('Connection is closed'));\n\t\t\t});\n\t\t}\n\n\t\t// Lazy evaluation is used to handle the caching to keep things optimal.\n\t\t// Convert it to a string once, and since the object is to some extent \n\t\t// immutable, I don't need to convert it after that for this particular\n\t\t// object instance.\n\t\tif(this._implicitsCache === undefined) {\n\t\t\tthis._implicitsCache = JSON.stringify(this._implicits);\n\t\t}\n\n\t\tvar implicits = this._implicitsCache;\n\t\t// the procol requires this to be an array.\n\t\tvar args = Array.prototype.slice.call(arguments);\n\t\treturn promiseFactory(function(resolve, reject) {\n\t\t\tvar body = serializer.call(path, args, implicits);\n\t\t\tvar opts = extend({ body: body }, options);\n\t\t\trequestFactory(opts, function(err, msg) {\n\t\t\t\tif(err) {\n\t\t\t\t\tdebug('Error %o processing request %o', err, opts);\n\t\t\t\t\treject(err);\n\t\t\t\t\tif(events.broadcastError) events.error(err);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tswitch(msg[0]) {\n\t\t\t\t\tcase 'exit':\n\t\t\t\t\t\t\n\t\t\t\t\t\t// all functions will now return a rejected promise.\n\t\t\t\t\t\tstate.isEnded = true;\n\t\t\t\t\t\tvar exitReason;\n\t\t\t\t\t\tif(msg[3] !== undefined) {\n\t\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\t\texitReason = JSON.parse(msg[3]);\n\t\t\t\t\t\t\t} catch(err) {}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tevents.exit(msg[1], msg[2], exitReason);\n\t\t\t\t\t\tevents.end(msg[1], msg[2], exitReason);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'err':\n\t\t\t\t\t\tvar res;\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tres = new Error(JSON.parse(msg[3]));\n\t\t\t\t\t\t} catch (err) {\n\t\t\t\t\t\t\tres = err;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\treject(res);\n\t\t\t\t\t\tif(events.broadcastError) events.error(res);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'res':\n\t\t\t\t\t\tresolve(JSON.parse(msg[3]));\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tdefault:\n\t\t\t\t\t\t// ????\n\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t};\n\n}\n\n/* Creates a new instance with the exact same remote procedures but with a \n * change in the implicit object.\n */ \nfunction $implicitly(key, value) {\n\tvar impl = {};\n\tfor(var k in this._implicits) {\n\t\timpl[k] = this._implicits;\n\t}\n\timpl[key] = value;\n\treturn new this.constructor(impl);\n}\n\n/* Generates a class from the procedure listing call to the server which will \n * be our remote.\n */ \nfunction createRemoteClass(promiseFactory, requestFactory, listing, options) {\n\tdebug('Creating remote class for listing:\\n%e', listing);\n\t// At this stage, I don't have much of a choice to add mutable state. If\n\t// the remote has been closed at the protocol-level, they need to change \n\t// of state to alter their behaviour. State in this case will be shared\n\t// accross all remote instances which have the same connection, even if\n\t// they have different implicits.\n\tvar state = {\n\t\tisEnded: false\n\t};\n\n\tvar on = options.on || {};\n\tvar events = {\n\t\tend: on.end,\n\t\terror: on.error,\n\t\tbroadcastError: !!on.error,\n\t\texit: on.exit\n\t};\n\n\tvar Remote = function(impl) {\n\t\tthis._implicits = impl;\n\t};\n\n\tvar RemoteProto = Object.create(null);\n\tfor(var key in listing) {\n\t\tRemoteProto[key] = parseField(\n\t\t\t\tpromiseFactory,\n\t\t\t\trequestFactory,\n\t\t\t\toptions,\n\t\t\t\tevents,\n\t\t\t\tstate,\n\t\t\t\tkey,\n\t\t\t\tlisting[key]);\n\t}\n\t\n\tRemote.prototype = RemoteProto;\n\tRemote.prototype.$implicitly = $implicitly;\n\t\n\t// I need to externalize the `end` handler since in some situation the end\n\t// will be protocol specific, e.g., tcp streams (persistent connections).\n\tRemote.prototype.$end = function() {\n\t\tstate.isEnded = true;\n\t\tif(typeof events.end === 'function') {\n\t\t\tevents.end.apply(this, arguments);\n\t\t}\n\t};\n\n\tRemote.prototype.constructor = Remote;\n\n\treturn Remote;\n}\n\n/* Handles any case where there was an error fetching the procedure listing. \n */\nfunction initError(msg) {\n\tvar errMsg;\n\ttry {\n\t\terrMsg = JSON.parse(msg[3]);\n\t} catch(err) {\n\t\treturn new Error('Error requesting procedure listing');\n\t}\n\treturn new Error(errMsg);\n}\n\n/* To make this agnostic, I need to use a function which will handle the \n * the request logic, abstracting the transport completely from this module.\n *\n * promiseFactory: function(resolver: function(resolve, reject)): Promise\n *\n * requestFactory: function(options, cb: function(err, msg: Array<String>)): void\n *\n */\nmodule.exports = function(promiseFactory, requestFactory, opts) {\n\t// clone this just to be on the safe side.\n\tvar heldOptions = opts ? extend({}, opts) : {};\n\t// return a client factory\n\treturn function(opts, cb) {\n\n\t\t// this will be the options object used for all requests for the client \n\t\t// instance, in part determined by the factory.\n\t\tvar defOptions = extend(extend({}, heldOptions), opts);\n\n\t\t//var events = defOptions.on;\n\n\t\t// start by asking the server to list its procedure which we can use.\n\t\tvar initOpts = extend({ body: serializer.ls() }, defOptions);\n\t\trequestFactory(initOpts, function(err, msg) {\n\t\t\t// the underlying network error should be propagated as it will be the \n\t\t\t// more useful than a cryptic, library-specific error. E.g., \n\t\t\t// ERRCONREFUSED will be more useful to know.\n\t\t\tif(err) {\n\t\t\t\tdebug('Error %o received for listing requests %o', err, initOpts);\n\t\t\t\treturn cb(err);\n\t\t\t}\n\t\t\t// The protocol permits returning an `err` or `exit` response for the\n\t\t\t// `ls` call.\n\t\t\tif(msg[0] === 'err' || msg[0] === 'exit') {\n\t\t\t\tdebug('Received a `%s` for the response to the listing', msg[0]);\n\t\t\t\treturn cb(initError(msg));\n\t\t\t}\n\n\t\t\t// While it should not happen, it is possible for a parse error. Since\n\t\t\t// this library aims to never throw anything, it should handle parse\n\t\t\t// errors.\n\t\t\tvar listing;\n\t\t\ttry {\n\t\t\t\tlisting = JSON.parse(msg[3]);\n\t\t\t} catch(er) {\n\t\t\t\tdebug('JSON parsing error at listing');\n\t\t\t\treturn cb(new Error('JSON parser error: ' + er.message));\n\t\t\t}\n\t\t\t\n\t\t\t// Since implicits create a new remote every time, I should optimize\n\t\t\t// object creation to limit the overhead. Instead of generating an entire\n\t\t\t// remote every time, the remote procedure functions are placed on a \n\t\t\t// prototype which is created on the fly at the initial connection.\n\t\t\tvar Remote = createRemoteClass(\n\t\t\t\t\tpromiseFactory, \n\t\t\t\t\trequestFactory, \n\t\t\t\t\tlisting, \n\t\t\t\t\tdefOptions);\n\n\t\t\tcb(null, new Remote({}));\t\n\t\t});\n\t};\n};\n",
    "\n'use strict';\n\nvar debug = require('debug');\n\n// Return an expanded json object, for better readability when it comes to\n// large objects.\ndebug.formatters.e = function(val) {\n\treturn JSON.stringify(val, null, '\\t');\n};\n\nmodule.exports = debug('pogostick-proto');\n",
    "function Exit(msg) {\n\tthis.message = msg || '';\n}\n\nExit.create = function(msg) {\n\treturn new Exit(msg);\n};\n\nmodule.exports = Exit;\n",
    "'use strict';\n\nvar cleanInitField = function(field){\n\tif(typeof field === 'function') {\n\t\treturn field.length;\n\t} else if (typeof field === 'object') {\n\t\tif(Array.isArray(field)) {\n\t\t\treturn field.map(cleanInitField);\n\t\t} else {\n\t\t\tvar res = {};\n\t\t\tfor(var key in field) {\n\t\t\t\tif(field.hasOwnProperty(key)) {\n\t\t\t\t\tres[key] = cleanInitField(field[key]);\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn res;\n\t\t}\n\t}\n};\n\nvar cleanProcObj = function(obj) {\n\tvar processed = {};\n\tfor(var key in obj) {\n\t\tif(obj.hasOwnProperty(key)) {\n\t\t\tprocessed[key] = cleanInitField(obj[key]);\n\t\t}\n\t}\n\treturn processed;\n};\n\nvar randString = (function() {\n\tvar chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';\n\treturn function() {\n\t\tvar res = [];\n\t\tfor(var i = 0; i < 10;i++){\n\t\t\tvar at = Math.floor(Math.random() * chars.length);\n\t\t\tvar c = chars.charAt(at);\n\t\t\tres.push(c);\n\t\t}\n\t\treturn res.join('');\n\t};\n})();\n\nmodule.exports = {\n\n\t/* On initial connection, the client sends a request to receive the init\n\t * call from the server\n\t */\n \tls: function() {\n\t\treturn 'ls\\n' +\n\t\t\tDate.now() + '\\n' +\n\t\t\trandString();\n\t},\t\n\n\n\t/* Server initially sends a listing of all available procedures.\n\t *\n\t * The procedure listing is a JSON object, where each field can be a container\n\t * or a \"true\".\n\t *\n\t * \"true\" maps to a remote function, while the containers are used as \n\t * namespaces to stay organized.\n\t *\n\t * Sender: Server; Receiver: Client\n\t */ \n\tinit: function(functions){\n\t\tvar cleaned = cleanProcObj(functions);\n\t\tvar body = JSON.stringify(cleaned);\n\n\t\treturn function(stamp, rand) {\n\t\t\treturn 'init\\n' +\n\t\t\t\tstamp + '\\n' +\n\t\t\t\trand + '\\n' +\n\t\t\t\tbody;\n\t\t};\n\t},\n\n\t/* Whenever a procedure is called by the API, the client send a \"call\" message\n\t * to the server.\n\t *\n\t * If the function is namespaced (by an array or object), the notation used to\n\t * denote mutiple keys is a dot, e.g. \"foo.bar\".\n\t *\n\t * In this case it returns a object containing the serialized payload, stamp, \n\t * and random string since the implementation for tls/tcp/websockets will need\n\t * this to manage the event processing.\n\t *\n\t * Sender: Client; Receiver: Server\n\t */ \n\tcall: function(path, args, implicits) {\n\t\tvar rand = randString();\n\t\tvar stamp = Date.now();\n\t\treturn {\n\t\t\tstamp: stamp,\n\t\t\trand: rand,\n\t\t\tstr: 'call\\n' + \n\t\t\t\tstamp + '\\n' +\n\t\t\t\trand + '\\n' + \n\t\t\t\tpath + '\\n' +\n\t\t\t\tJSON.stringify(args) + '\\n' +\n\t\t\t\t(implicits ? JSON.stringify(implicits) : '')\n\t\t};\n\t},\n\n\t/* Response sent by the server.\n\t *\n\t * The stamp and randStr must be the ones that te client sent when calling the\n\t * procedure.\n\t *\n\t * Sender: Server; Receiver: Client\n\t */ \n\tres: function(stamp, randStr, res) {\n\t\treturn 'res\\n' +\n\t\t\tstamp + '\\n' +\n\t\t\trandStr + '\\n' +\n\t\t\tJSON.stringify(res);\n\t},\n\n\t/* Whenever there is an error on the server where the client would probably \n\t * need to use a different code path, the server send the err message.\n\t *\n\t * Sender: Server; Receiver: Client\n\t */ \n\terr: function(stamp, randStr, res) {\n\t\treturn 'err\\n' +\n\t\t\tstamp + '\\n' +\n\t\t\trandStr + '\\n' +\n\t\t\tJSON.stringify(res);\n\t},\n\t\n\t/* Server response or push message sent to close the connection \n\t *\n\t * The stamp and randStr are optional.\n\t *\n\t * Sender: Server; Receiver: Client\n\t */\n\texit: function(stamp, randStr, err) {\n\t\tif(arguments.length === 3) {\n\t\t\treturn 'err\\n' +\n\t\t\t\tstamp + '\\n' +\n\t\t\t\trandStr + '\\n' +\n\t\t\t\terr;\n\t\t} else {\n\t\t\treturn 'err\\n\\n\\n' + JSON.stringify(err);\n\t\t}\n\t}\n};\n",
    "\n'use strict';\n\nvar extend = require('extend');\nvar serializer = require('./serializer');\nvar debug = require('./debug');\n\nvar Exit = require('./exit');\n\nvar noop = function() {};\n\nvar debugResponse = debug.enabled ?\n\tdebug.bind(debug, 'serializing result %s') : noop;\n\nfunction processCall(procs, msg) {\n\t\n\tvar proc = procs;\n\tvar parts = msg[3].split('.');\n\tfor(var i = 0; i < parts.length; i++) {\n\t\tproc = proc[parts[i]];\n\t\tif(proc === undefined) return notExist(msg);\n\t}\n\n\tvar implicits, res;\n\ttry {\n\t\timplicits = msg[5] ? JSON.parse(msg[5]) : {};\n\t\tres = proc.apply(implicits, JSON.parse(msg[4]));\n\t} catch(err) {\n\t\treturn serializer.err(msg[1], msg[2], err.message);\n\t}\n\n\t// the value returned can either be a promise or regular value. \n\tif(typeof res.then === 'function') {\n\t\treturn res.then(function(res) {\n\t\t\tdebugResponse(res);\n\t\t\tif(res instanceof Exit) {\n\t\t\t\treturn serializer.exit(msg[1], msg[2], res.message);\n\t\t\t} else {\n\t\t\t\treturn serializer.res(msg[1], msg[2], res);\n\t\t\t}\n\t\t\t\n\t\t}, function(err) {\n\t\t\t// I dont think it would make sense for the user to send the Exit object\n\t\t\t// as a rejected promise, so don't process it here.\n\t\t\treturn serializer.err(msg[1], msg[2], err);\n\t\t});\n\t} else {\n\t\tdebugResponse(res);\n\t\tif(res instanceof Exit) {\n\t\t\treturn serializer.exit(msg[1], msg[2], res.message);\n\t\t} else {\n\t\t\treturn serializer.res(msg[1], msg[2], res);\n\t\t}\n\t}\n}\n\nfunction notExist(msg) {\n\tvar err = new Error('Procedure ' + msg[3] + ' does not exist');\n\treturn serializer.err(msg[1], msg[2], err);\n}\n\nfunction createReqHandler(procs) {\n\tvar procsInit = serializer.init(procs);\n\treturn function(msg) {\n\t\tswitch(msg[0]) {\n\t\t\tcase 'ls':\n\t\t\t\treturn procsInit(msg[1], msg[2]);\n\n\t\t\tcase 'call':\n\t\t\t\treturn processCall(procs, msg);\n\t\t\t\t\t\n\t\t\tdefault:\n\t\t\t\tvar err = { \n\t\t\t\t\tmessage: 'Could not process request.', \n\t\t\t\t\treceived: msg.join('\\n') \n\t\t\t\t};\n\t\t\t\treturn serializer.err(msg[1], msg[2], err);\n\t\t}\t\n\n\t};\n}\n\n/* Creates a server instance which will send its results. \n */\nmodule.exports = function(serverFactory, opts) {\n\tvar defOpts = extend({}, opts);\n\treturn function(procs, opts) {\n\t\tvar options = extend(extend({}, defOpts), opts);\n\t\tvar processRequest = createReqHandler(procs);\n\t\treturn serverFactory(processRequest, options);\n\t};\n};\n\n\nmodule.exports.fn = createReqHandler;\n",
    "\n/**\n * This is the web browser implementation of `debug()`.\n *\n * Expose `debug()` as the module.\n */\n\nexports = module.exports = require('./debug');\nexports.log = log;\nexports.formatArgs = formatArgs;\nexports.save = save;\nexports.load = load;\nexports.useColors = useColors;\nexports.storage = 'undefined' != typeof chrome\n               && 'undefined' != typeof chrome.storage\n                  ? chrome.storage.local\n                  : localstorage();\n\n/**\n * Colors.\n */\n\nexports.colors = [\n  'lightseagreen',\n  'forestgreen',\n  'goldenrod',\n  'dodgerblue',\n  'darkorchid',\n  'crimson'\n];\n\n/**\n * Currently only WebKit-based Web Inspectors, Firefox >= v31,\n * and the Firebug extension (any Firefox version) are known\n * to support \"%c\" CSS customizations.\n *\n * TODO: add a `localStorage` variable to explicitly enable/disable colors\n */\n\nfunction useColors() {\n  // is webkit? http://stackoverflow.com/a/16459606/376773\n  return ('WebkitAppearance' in document.documentElement.style) ||\n    // is firebug? http://stackoverflow.com/a/398120/376773\n    (window.console && (console.firebug || (console.exception && console.table))) ||\n    // is firefox >= v31?\n    // https://developer.mozilla.org/en-US/docs/Tools/Web_Console#Styling_messages\n    (navigator.userAgent.toLowerCase().match(/firefox\\/(\\d+)/) && parseInt(RegExp.$1, 10) >= 31);\n}\n\n/**\n * Map %j to `JSON.stringify()`, since no Web Inspectors do that by default.\n */\n\nexports.formatters.j = function(v) {\n  return JSON.stringify(v);\n};\n\n\n/**\n * Colorize log arguments if enabled.\n *\n * @api public\n */\n\nfunction formatArgs() {\n  var args = arguments;\n  var useColors = this.useColors;\n\n  args[0] = (useColors ? '%c' : '')\n    + this.namespace\n    + (useColors ? ' %c' : ' ')\n    + args[0]\n    + (useColors ? '%c ' : ' ')\n    + '+' + exports.humanize(this.diff);\n\n  if (!useColors) return args;\n\n  var c = 'color: ' + this.color;\n  args = [args[0], c, 'color: inherit'].concat(Array.prototype.slice.call(args, 1));\n\n  // the final \"%c\" is somewhat tricky, because there could be other\n  // arguments passed either before or after the %c, so we need to\n  // figure out the correct index to insert the CSS into\n  var index = 0;\n  var lastC = 0;\n  args[0].replace(/%[a-z%]/g, function(match) {\n    if ('%%' === match) return;\n    index++;\n    if ('%c' === match) {\n      // we only are interested in the *last* %c\n      // (the user may have provided their own)\n      lastC = index;\n    }\n  });\n\n  args.splice(lastC, 0, c);\n  return args;\n}\n\n/**\n * Invokes `console.log()` when available.\n * No-op when `console.log` is not a \"function\".\n *\n * @api public\n */\n\nfunction log() {\n  // this hackery is required for IE8/9, where\n  // the `console.log` function doesn't have 'apply'\n  return 'object' === typeof console\n    && console.log\n    && Function.prototype.apply.call(console.log, console, arguments);\n}\n\n/**\n * Save `namespaces`.\n *\n * @param {String} namespaces\n * @api private\n */\n\nfunction save(namespaces) {\n  try {\n    if (null == namespaces) {\n      exports.storage.removeItem('debug');\n    } else {\n      exports.storage.debug = namespaces;\n    }\n  } catch(e) {}\n}\n\n/**\n * Load `namespaces`.\n *\n * @return {String} returns the previously persisted debug modes\n * @api private\n */\n\nfunction load() {\n  var r;\n  try {\n    r = exports.storage.debug;\n  } catch(e) {}\n  return r;\n}\n\n/**\n * Enable namespaces listed in `localStorage.debug` initially.\n */\n\nexports.enable(load());\n\n/**\n * Localstorage attempts to return the localstorage.\n *\n * This is necessary because safari throws\n * when a user disables cookies/localstorage\n * and you attempt to access it.\n *\n * @return {LocalStorage}\n * @api private\n */\n\nfunction localstorage(){\n  try {\n    return window.localStorage;\n  } catch (e) {}\n}\n",
    "\n/**\n * This is the common logic for both the Node.js and web browser\n * implementations of `debug()`.\n *\n * Expose `debug()` as the module.\n */\n\nexports = module.exports = debug;\nexports.coerce = coerce;\nexports.disable = disable;\nexports.enable = enable;\nexports.enabled = enabled;\nexports.humanize = require('ms');\n\n/**\n * The currently active debug mode names, and names to skip.\n */\n\nexports.names = [];\nexports.skips = [];\n\n/**\n * Map of special \"%n\" handling functions, for the debug \"format\" argument.\n *\n * Valid key names are a single, lowercased letter, i.e. \"n\".\n */\n\nexports.formatters = {};\n\n/**\n * Previously assigned color.\n */\n\nvar prevColor = 0;\n\n/**\n * Previous log timestamp.\n */\n\nvar prevTime;\n\n/**\n * Select a color.\n *\n * @return {Number}\n * @api private\n */\n\nfunction selectColor() {\n  return exports.colors[prevColor++ % exports.colors.length];\n}\n\n/**\n * Create a debugger with the given `namespace`.\n *\n * @param {String} namespace\n * @return {Function}\n * @api public\n */\n\nfunction debug(namespace) {\n\n  // define the `disabled` version\n  function disabled() {\n  }\n  disabled.enabled = false;\n\n  // define the `enabled` version\n  function enabled() {\n\n    var self = enabled;\n\n    // set `diff` timestamp\n    var curr = +new Date();\n    var ms = curr - (prevTime || curr);\n    self.diff = ms;\n    self.prev = prevTime;\n    self.curr = curr;\n    prevTime = curr;\n\n    // add the `color` if not set\n    if (null == self.useColors) self.useColors = exports.useColors();\n    if (null == self.color && self.useColors) self.color = selectColor();\n\n    var args = Array.prototype.slice.call(arguments);\n\n    args[0] = exports.coerce(args[0]);\n\n    if ('string' !== typeof args[0]) {\n      // anything else let's inspect with %o\n      args = ['%o'].concat(args);\n    }\n\n    // apply any `formatters` transformations\n    var index = 0;\n    args[0] = args[0].replace(/%([a-z%])/g, function(match, format) {\n      // if we encounter an escaped % then don't increase the array index\n      if (match === '%%') return match;\n      index++;\n      var formatter = exports.formatters[format];\n      if ('function' === typeof formatter) {\n        var val = args[index];\n        match = formatter.call(self, val);\n\n        // now we need to remove `args[index]` since it's inlined in the `format`\n        args.splice(index, 1);\n        index--;\n      }\n      return match;\n    });\n\n    if ('function' === typeof exports.formatArgs) {\n      args = exports.formatArgs.apply(self, args);\n    }\n    var logFn = enabled.log || exports.log || console.log.bind(console);\n    logFn.apply(self, args);\n  }\n  enabled.enabled = true;\n\n  var fn = exports.enabled(namespace) ? enabled : disabled;\n\n  fn.namespace = namespace;\n\n  return fn;\n}\n\n/**\n * Enables a debug mode by namespaces. This can include modes\n * separated by a colon and wildcards.\n *\n * @param {String} namespaces\n * @api public\n */\n\nfunction enable(namespaces) {\n  exports.save(namespaces);\n\n  var split = (namespaces || '').split(/[\\s,]+/);\n  var len = split.length;\n\n  for (var i = 0; i < len; i++) {\n    if (!split[i]) continue; // ignore empty strings\n    namespaces = split[i].replace(/\\*/g, '.*?');\n    if (namespaces[0] === '-') {\n      exports.skips.push(new RegExp('^' + namespaces.substr(1) + '$'));\n    } else {\n      exports.names.push(new RegExp('^' + namespaces + '$'));\n    }\n  }\n}\n\n/**\n * Disable debug output.\n *\n * @api public\n */\n\nfunction disable() {\n  exports.enable('');\n}\n\n/**\n * Returns true if the given mode name is enabled, false otherwise.\n *\n * @param {String} name\n * @return {Boolean}\n * @api public\n */\n\nfunction enabled(name) {\n  var i, len;\n  for (i = 0, len = exports.skips.length; i < len; i++) {\n    if (exports.skips[i].test(name)) {\n      return false;\n    }\n  }\n  for (i = 0, len = exports.names.length; i < len; i++) {\n    if (exports.names[i].test(name)) {\n      return true;\n    }\n  }\n  return false;\n}\n\n/**\n * Coerce `val`.\n *\n * @param {Mixed} val\n * @return {Mixed}\n * @api private\n */\n\nfunction coerce(val) {\n  if (val instanceof Error) return val.stack || val.message;\n  return val;\n}\n",
    "/**\n * Helpers.\n */\n\nvar s = 1000;\nvar m = s * 60;\nvar h = m * 60;\nvar d = h * 24;\nvar y = d * 365.25;\n\n/**\n * Parse or format the given `val`.\n *\n * Options:\n *\n *  - `long` verbose formatting [false]\n *\n * @param {String|Number} val\n * @param {Object} options\n * @return {String|Number}\n * @api public\n */\n\nmodule.exports = function(val, options){\n  options = options || {};\n  if ('string' == typeof val) return parse(val);\n  return options.long\n    ? long(val)\n    : short(val);\n};\n\n/**\n * Parse the given `str` and return milliseconds.\n *\n * @param {String} str\n * @return {Number}\n * @api private\n */\n\nfunction parse(str) {\n  str = '' + str;\n  if (str.length > 10000) return;\n  var match = /^((?:\\d+)?\\.?\\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(str);\n  if (!match) return;\n  var n = parseFloat(match[1]);\n  var type = (match[2] || 'ms').toLowerCase();\n  switch (type) {\n    case 'years':\n    case 'year':\n    case 'yrs':\n    case 'yr':\n    case 'y':\n      return n * y;\n    case 'days':\n    case 'day':\n    case 'd':\n      return n * d;\n    case 'hours':\n    case 'hour':\n    case 'hrs':\n    case 'hr':\n    case 'h':\n      return n * h;\n    case 'minutes':\n    case 'minute':\n    case 'mins':\n    case 'min':\n    case 'm':\n      return n * m;\n    case 'seconds':\n    case 'second':\n    case 'secs':\n    case 'sec':\n    case 's':\n      return n * s;\n    case 'milliseconds':\n    case 'millisecond':\n    case 'msecs':\n    case 'msec':\n    case 'ms':\n      return n;\n  }\n}\n\n/**\n * Short format for `ms`.\n *\n * @param {Number} ms\n * @return {String}\n * @api private\n */\n\nfunction short(ms) {\n  if (ms >= d) return Math.round(ms / d) + 'd';\n  if (ms >= h) return Math.round(ms / h) + 'h';\n  if (ms >= m) return Math.round(ms / m) + 'm';\n  if (ms >= s) return Math.round(ms / s) + 's';\n  return ms + 'ms';\n}\n\n/**\n * Long format for `ms`.\n *\n * @param {Number} ms\n * @return {String}\n * @api private\n */\n\nfunction long(ms) {\n  return plural(ms, d, 'day')\n    || plural(ms, h, 'hour')\n    || plural(ms, m, 'minute')\n    || plural(ms, s, 'second')\n    || ms + ' ms';\n}\n\n/**\n * Pluralization helper.\n */\n\nfunction plural(ms, n, name) {\n  if (ms < n) return;\n  if (ms < n * 1.5) return Math.floor(ms / n) + ' ' + name;\n  return Math.ceil(ms / n) + ' ' + name + 's';\n}\n",
    "'use strict';\n\nvar hasOwn = Object.prototype.hasOwnProperty;\nvar toStr = Object.prototype.toString;\n\nvar isArray = function isArray(arr) {\n\tif (typeof Array.isArray === 'function') {\n\t\treturn Array.isArray(arr);\n\t}\n\n\treturn toStr.call(arr) === '[object Array]';\n};\n\nvar isPlainObject = function isPlainObject(obj) {\n\tif (!obj || toStr.call(obj) !== '[object Object]') {\n\t\treturn false;\n\t}\n\n\tvar hasOwnConstructor = hasOwn.call(obj, 'constructor');\n\tvar hasIsPrototypeOf = obj.constructor && obj.constructor.prototype && hasOwn.call(obj.constructor.prototype, 'isPrototypeOf');\n\t// Not own constructor property must be Object\n\tif (obj.constructor && !hasOwnConstructor && !hasIsPrototypeOf) {\n\t\treturn false;\n\t}\n\n\t// Own properties are enumerated firstly, so to speed up,\n\t// if last one is own, then all properties are own.\n\tvar key;\n\tfor (key in obj) {/**/}\n\n\treturn typeof key === 'undefined' || hasOwn.call(obj, key);\n};\n\nmodule.exports = function extend() {\n\tvar options, name, src, copy, copyIsArray, clone,\n\t\ttarget = arguments[0],\n\t\ti = 1,\n\t\tlength = arguments.length,\n\t\tdeep = false;\n\n\t// Handle a deep copy situation\n\tif (typeof target === 'boolean') {\n\t\tdeep = target;\n\t\ttarget = arguments[1] || {};\n\t\t// skip the boolean and the target\n\t\ti = 2;\n\t} else if ((typeof target !== 'object' && typeof target !== 'function') || target == null) {\n\t\ttarget = {};\n\t}\n\n\tfor (; i < length; ++i) {\n\t\toptions = arguments[i];\n\t\t// Only deal with non-null/undefined values\n\t\tif (options != null) {\n\t\t\t// Extend the base object\n\t\t\tfor (name in options) {\n\t\t\t\tsrc = target[name];\n\t\t\t\tcopy = options[name];\n\n\t\t\t\t// Prevent never-ending loop\n\t\t\t\tif (target !== copy) {\n\t\t\t\t\t// Recurse if we're merging plain objects or arrays\n\t\t\t\t\tif (deep && copy && (isPlainObject(copy) || (copyIsArray = isArray(copy)))) {\n\t\t\t\t\t\tif (copyIsArray) {\n\t\t\t\t\t\t\tcopyIsArray = false;\n\t\t\t\t\t\t\tclone = src && isArray(src) ? src : [];\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tclone = src && isPlainObject(src) ? src : {};\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// Never move original objects, clone them\n\t\t\t\t\t\ttarget[name] = extend(deep, clone, copy);\n\n\t\t\t\t\t// Don't bring in undefined values\n\t\t\t\t\t} else if (typeof copy !== 'undefined') {\n\t\t\t\t\t\ttarget[name] = copy;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t// Return the modified object\n\treturn target;\n};\n\n",
    "module.exports = function (length, func) {\n\tswitch(length) {\n\t\tcase 0: return function() { return func.apply(this, arguments); };\n\t\tcase 1: return function(a) { return func.apply(this, arguments); };\n\t\tcase 2: return function(a,b) { return func.apply(this, arguments); };\n\t\tcase 3: return function(a,b,c) { return func.apply(this, arguments); };\n\t\tcase 4: return function(a,b,c,d) { return func.apply(this, arguments); };\n\t\tcase 5: return function(a,b,c,d,e) { return func.apply(this, arguments); };\n\t\tcase 6: return function(a,b,c,d,e,f) { return func.apply(this, arguments); };\n\t\tcase 7: return function(a,b,c,d,e,f,g) { return func.apply(this, arguments); };\n\t\tcase 8: return function(a,b,c,d,e,f,g,h) { return func.apply(this, arguments); };\n\t\tcase 9: return function(a,b,c,d,e,f,g,h,i) { return func.apply(this, arguments); };\n\t\tcase 10: return function(a,b,c,d,e,f,g,h,i,j) { return func.apply(this, arguments); };\n\t\tcase 11: return function(a,b,c,d,e,f,g,h,i,j,k) { return func.apply(this, arguments); };\n\t\tcase 12: return function(a,b,c,d,e,f,g,h,i,j,k,l) { return func.apply(this, arguments); };\n\t\tcase 13: return function(a,b,c,d,e,f,g,h,i,j,k,l,m) { return func.apply(this, arguments); };\n\t\tcase 14: return function(a,b,c,d,e,f,g,h,i,j,k,l,m,n) { return func.apply(this, arguments); };\n\t\tcase 15: return function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o) { return func.apply(this, arguments); };\n\t\tcase 16: return function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p) { return func.apply(this, arguments); };\n\t\tcase 17: return function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q) { return func.apply(this, arguments); };\n\t\tcase 18: return function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r) { return func.apply(this, arguments); };\n\t\tcase 19: return function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s) { return func.apply(this, arguments); };\n\t\tcase 20: return function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t) { return func.apply(this, arguments); };\n\t\tcase 21: return function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u) { return func.apply(this, arguments); };\n\t\tcase 22: return function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v) { return func.apply(this, arguments); };\n\t\tcase 23: return function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w) { return func.apply(this, arguments); };\n\t\tcase 24: return function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x) { return func.apply(this, arguments); };\n\t\tcase 25: return function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y) { return func.apply(this, arguments); };\n\t\tcase 26: return function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z) { return func.apply(this, arguments); };\n\t\tdefault: throw 'Function length is not valid, mk-fn cannot create function';\n\t}\n};\n"
  ]
}